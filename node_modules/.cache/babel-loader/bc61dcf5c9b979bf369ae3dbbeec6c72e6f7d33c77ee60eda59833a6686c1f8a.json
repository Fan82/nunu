{"ast":null,"code":"var _jsxFileName = \"/Users/fan/Documents/GitHub/nunu/src/component/MapCanvas.jsx\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MapCanvas = () => {\n  _s();\n  const canvasRef = useRef(null);\n  const [car, setCar] = useState({\n    x: 50,\n    y: 50\n  });\n  const [destination, setDestination] = useState(null);\n  const [info, setInfo] = useState(null);\n  const [imagesLoaded, setImagesLoaded] = useState(false);\n  const mapImage = useRef(null);\n  const carImage = useRef(null);\n  const areaInfo = [{\n    x: 200,\n    y: 160,\n    name: \"mini nunu\",\n    description: \"Suntec City\"\n  }, {\n    x: 650,\n    y: 480,\n    name: \"nunu Van\",\n    description: \"Hong Lim Park\"\n  }];\n  useEffect(() => {\n    const loadImages = () => {\n      const map = new Image();\n      const car = new Image();\n      map.src = \"./map.png\"; // 放在 public 的圖片路徑\n      car.src = \"./van.png\"; // 車子圖片\n\n      map.onload = car.onload = () => {\n        mapImage.current = map;\n        carImage.current = car;\n        setImagesLoaded(true);\n      };\n    };\n    loadImages();\n  }, []);\n\n  // 畫畫面\n  useEffect(() => {\n    if (!imagesLoaded) return;\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    const draw = () => {\n      // 清空畫面\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n      // 畫地圖背景\n      ctx.drawImage(mapImage.current, 0, 0, canvas.width, canvas.height);\n\n      // 畫地點標記\n      areaInfo.forEach(area => {\n        ctx.beginPath();\n        ctx.arc(area.x, area.y, 8, 0, Math.PI * 2);\n        ctx.fillStyle = \"orange\";\n        ctx.fill();\n        ctx.closePath();\n      });\n\n      // 畫車子圖片\n      const carWidth = 90;\n      const carHeight = 90;\n      ctx.drawImage(carImage.current, car.x - carWidth / 2, car.y - carHeight / 2, carWidth, carHeight);\n    };\n    draw();\n  }, [car, imagesLoaded]);\n\n  // 車子移動\n  useEffect(() => {\n    if (!destination || !imagesLoaded) return;\n    const move = () => {\n      setCar(prev => {\n        const dx = destination.x - prev.x;\n        const dy = destination.y - prev.y;\n        const distance = Math.sqrt(dx * dx + dy * dy);\n        if (distance < 2) {\n          setDestination(null);\n          const found = areaInfo.find(area => Math.abs(area.x - destination.x) < 15 && Math.abs(area.y - destination.y) < 15);\n          if (found) setInfo(found);\n          return prev;\n        }\n        return {\n          x: prev.x + dx * 0.05,\n          y: prev.y + dy * 0.05\n        };\n      });\n    };\n    const interval = setInterval(move, 16);\n    return () => clearInterval(interval);\n  }, [destination, imagesLoaded]);\n  const handleClick = e => {\n    const rect = canvasRef.current.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n    setDestination({\n      x,\n      y\n    });\n    setInfo(null);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      width: 1400,\n      height: 500\n      // style={{ border: \"1px solid #ccc\" }}\n      ,\n      onClick: handleClick\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), info && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4 p-4 bg-yellow-100 border border-yellow-400 rounded\",\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: info.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: info.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 5\n  }, this);\n};\n_s(MapCanvas, \"YmtXMoVE5rqvgpHPG5xYtrDh9t0=\");\n_c = MapCanvas;\nexport default MapCanvas;\nvar _c;\n$RefreshReg$(_c, \"MapCanvas\");","map":{"version":3,"names":["React","useRef","useEffect","useState","jsxDEV","_jsxDEV","MapCanvas","_s","canvasRef","car","setCar","x","y","destination","setDestination","info","setInfo","imagesLoaded","setImagesLoaded","mapImage","carImage","areaInfo","name","description","loadImages","map","Image","src","onload","current","canvas","ctx","getContext","draw","clearRect","width","height","drawImage","forEach","area","beginPath","arc","Math","PI","fillStyle","fill","closePath","carWidth","carHeight","move","prev","dx","dy","distance","sqrt","found","find","abs","interval","setInterval","clearInterval","handleClick","e","rect","getBoundingClientRect","clientX","left","clientY","top","children","ref","onClick","fileName","_jsxFileName","lineNumber","columnNumber","className","_c","$RefreshReg$"],"sources":["/Users/fan/Documents/GitHub/nunu/src/component/MapCanvas.jsx"],"sourcesContent":["import React, { useRef, useEffect, useState } from \"react\";\n\nconst MapCanvas = () => {\n  const canvasRef = useRef(null);\n  const [car, setCar] = useState({ x: 50, y: 50 });\n  const [destination, setDestination] = useState(null);\n  const [info, setInfo] = useState(null);\n  const [imagesLoaded, setImagesLoaded] = useState(false);\n  const mapImage = useRef(null);\n  const carImage = useRef(null);\n\n  const areaInfo = [\n    { x: 200, y: 160, name: \"mini nunu\", description: \"Suntec City\" },\n    { x: 650, y: 480, name: \"nunu Van\", description: \"Hong Lim Park\" },\n  ];\n\n  useEffect(() => {\n    const loadImages = () => {\n      const map = new Image();\n      const car = new Image();\n      map.src = \"./map.png\"; // 放在 public 的圖片路徑\n      car.src = \"./van.png\"; // 車子圖片\n\n      map.onload = car.onload = () => {\n        mapImage.current = map;\n        carImage.current = car;\n        setImagesLoaded(true);\n      };\n    };\n\n    loadImages();\n  }, []);\n\n  // 畫畫面\n  useEffect(() => {\n    if (!imagesLoaded) return;\n\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n\n    const draw = () => {\n      // 清空畫面\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n      // 畫地圖背景\n      ctx.drawImage(mapImage.current, 0, 0, canvas.width, canvas.height);\n\n      // 畫地點標記\n      areaInfo.forEach((area) => {\n        ctx.beginPath();\n        ctx.arc(area.x, area.y, 8, 0, Math.PI * 2);\n        ctx.fillStyle = \"orange\";\n        ctx.fill();\n        ctx.closePath();\n      });\n\n      // 畫車子圖片\n      const carWidth = 90;\n      const carHeight = 90;\n      ctx.drawImage(\n        carImage.current,\n        car.x - carWidth / 2,\n        car.y - carHeight / 2,\n        carWidth,\n        carHeight\n      );\n    };\n\n    draw();\n  }, [car, imagesLoaded]);\n\n  // 車子移動\n  useEffect(() => {\n    if (!destination || !imagesLoaded) return;\n\n    const move = () => {\n      setCar((prev) => {\n        const dx = destination.x - prev.x;\n        const dy = destination.y - prev.y;\n        const distance = Math.sqrt(dx * dx + dy * dy);\n\n        if (distance < 2) {\n          setDestination(null);\n          const found = areaInfo.find(\n            (area) =>\n              Math.abs(area.x - destination.x) < 15 &&\n              Math.abs(area.y - destination.y) < 15\n          );\n          if (found) setInfo(found);\n          return prev;\n        }\n\n        return {\n          x: prev.x + dx * 0.05,\n          y: prev.y + dy * 0.05,\n        };\n      });\n    };\n\n    const interval = setInterval(move, 16);\n    return () => clearInterval(interval);\n  }, [destination, imagesLoaded]);\n\n  const handleClick = (e) => {\n    const rect = canvasRef.current.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n    setDestination({ x, y });\n    setInfo(null);\n  };\n\n  return (\n    <div>\n      <canvas\n        ref={canvasRef}\n        width={1400}\n        height={500}\n        // style={{ border: \"1px solid #ccc\" }}\n        onClick={handleClick}\n      />\n      {info && (\n        <div className=\"mt-4 p-4 bg-yellow-100 border border-yellow-400 rounded\">\n          <strong>{info.name}</strong>\n          <p>{info.description}</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default MapCanvas;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}