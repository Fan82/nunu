{"ast":null,"code":"import React,{useState,useEffect,useRef}from\"react\";import{motion,AnimatePresence}from\"framer-motion\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ScrollTopIndicator(){const[displayText,setDisplayText]=useState(\"Scroll\");const[visible,setVisible]=useState(true);const timeoutRef=useRef(null);useEffect(()=>{const handleScroll=()=>{const scrollY=window.scrollY||window.pageYOffset;const windowHeight=window.innerHeight;const documentHeight=document.body.scrollHeight;const windowBottom=scrollY+windowHeight;const showScroll=scrollY<300;const showTop=windowBottom>=documentHeight*0.8;let nextText=\"\";if(showScroll){nextText=\"Scroll\";}else if(showTop){nextText=\"Top\";}if(nextText!==displayText){setVisible(false);if(timeoutRef.current)clearTimeout(timeoutRef.current);timeoutRef.current=setTimeout(()=>{setDisplayText(nextText);setVisible(true);},100);// 與 transition 時間配合\n}};window.addEventListener(\"scroll\",handleScroll);handleScroll();return()=>{window.removeEventListener(\"scroll\",handleScroll);if(timeoutRef.current)clearTimeout(timeoutRef.current);};},[displayText]);const handleClick=()=>{if(displayText===\"Top\"){window.scrollTo({top:0,behavior:\"smooth\"});}};return/*#__PURE__*/_jsx(AnimatePresence,{mode:\"wait\",children:displayText&&/*#__PURE__*/_jsxs(motion.div,{className:`component-svg mix-blend-luminosity fixed bottom-12 left-6 z-10 cursor-pointer md:left-20 lg:left-14 ${displayText===\"Top\"?\"top\":\"\"}`,initial:{opacity:0,y:20},animate:{opacity:visible?1:0,y:visible?0:20},exit:{opacity:0,y:20},transition:{duration:0.3},onClick:handleClick,children:[/*#__PURE__*/_jsx(\"div\",{className:\"line\",children:/*#__PURE__*/_jsx(\"span\",{})}),displayText]},displayText)});}export default ScrollTopIndicator;","map":{"version":3,"names":["React","useState","useEffect","useRef","motion","AnimatePresence","jsx","_jsx","jsxs","_jsxs","ScrollTopIndicator","displayText","setDisplayText","visible","setVisible","timeoutRef","handleScroll","scrollY","window","pageYOffset","windowHeight","innerHeight","documentHeight","document","body","scrollHeight","windowBottom","showScroll","showTop","nextText","current","clearTimeout","setTimeout","addEventListener","removeEventListener","handleClick","scrollTo","top","behavior","mode","children","div","className","initial","opacity","y","animate","exit","transition","duration","onClick"],"sources":["/Users/fan/Documents/GitHub/nunu/src/component/ScrollTopIndicator.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\n\nfunction ScrollTopIndicator() {\n  const [displayText, setDisplayText] = useState(\"Scroll\");\n  const [visible, setVisible] = useState(true);\n  const timeoutRef = useRef(null);\n\n  useEffect(() => {\n    const handleScroll = () => {\n      const scrollY = window.scrollY || window.pageYOffset;\n      const windowHeight = window.innerHeight;\n      const documentHeight = document.body.scrollHeight;\n      const windowBottom = scrollY + windowHeight;\n\n      const showScroll = scrollY < 300;\n      const showTop = windowBottom >= documentHeight * 0.8;\n\n      let nextText = \"\";\n      if (showScroll) {\n        nextText = \"Scroll\";\n      } else if (showTop) {\n        nextText = \"Top\";\n      }\n\n      if (nextText !== displayText) {\n        setVisible(false);\n        if (timeoutRef.current) clearTimeout(timeoutRef.current);\n\n        timeoutRef.current = setTimeout(() => {\n          setDisplayText(nextText);\n          setVisible(true);\n        }, 100); // 與 transition 時間配合\n      }\n    };\n\n    window.addEventListener(\"scroll\", handleScroll);\n    handleScroll();\n\n    return () => {\n      window.removeEventListener(\"scroll\", handleScroll);\n      if (timeoutRef.current) clearTimeout(timeoutRef.current);\n    };\n  }, [displayText]);\n\n  const handleClick = () => {\n    if (displayText === \"Top\") {\n      window.scrollTo({ top: 0, behavior: \"smooth\" });\n    }\n  };\n\n  return (\n    <AnimatePresence mode=\"wait\">\n      {displayText && (\n        <motion.div\n          key={displayText}\n          className={`component-svg mix-blend-luminosity fixed bottom-12 left-6 z-10 cursor-pointer md:left-20 lg:left-14 ${\n            displayText === \"Top\" ? \"top\" : \"\"\n          }`}\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: visible ? 1 : 0, y: visible ? 0 : 20 }}\n          exit={{ opacity: 0, y: 20 }}\n          transition={{ duration: 0.3 }}\n          onClick={handleClick}\n        >\n          <div className=\"line\">\n            <span></span>\n          </div>\n          {displayText}\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n\nexport default ScrollTopIndicator;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}