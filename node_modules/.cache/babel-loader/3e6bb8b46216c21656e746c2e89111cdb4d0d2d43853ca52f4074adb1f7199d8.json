{"ast":null,"code":"var _jsxFileName = \"/Users/fan/Documents/GitHub/nunu/src/component/MapScene.jsx\",\n  _s = $RefreshSig$();\nimport { useRef, useState, useEffect } from \"react\";\nimport { motion } from \"framer-motion\";\nimport carImg from \"../assets/images/van1.webp\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function MapScene({\n  onTrigger\n}) {\n  _s();\n  const pathA = useRef(null);\n  const pathB = useRef(null);\n  const [carPos, setCarPos] = useState({\n    x: 0,\n    y: 0\n  });\n  const [showCar, setShowCar] = useState(true);\n  const [activePath, setActivePath] = useState(null);\n\n  // 將車子定位在 pathA 起點，並放大尺寸\n  useEffect(() => {\n    const p = pathA.current.getPointAtLength(0);\n    setCarPos({\n      x: p.x,\n      y: p.y\n    });\n  }, []);\n\n  // 控制車子行駛動畫\n  const runPath = (pathRef, onComplete) => {\n    const total = pathRef.current.getTotalLength();\n    let start = null;\n    const duration = 1500;\n    const animate = timestamp => {\n      if (!start) start = timestamp;\n      const elapsed = timestamp - start;\n      const progress = Math.min(elapsed / duration, 1);\n      const point = pathRef.current.getPointAtLength(total * progress);\n      setCarPos({\n        x: point.x,\n        y: point.y\n      });\n      if (progress < 1) {\n        requestAnimationFrame(animate);\n      } else {\n        setTimeout(() => {\n          onComplete();\n        }, 1000);\n      }\n    };\n    requestAnimationFrame(animate);\n  };\n\n  // 點擊按鈕時觸發行駛\n  const handleClick = target => {\n    setShowCar(true);\n    const pathRef = target === 1 ? pathA : pathB;\n    setActivePath(target);\n    runPath(pathRef, () => onTrigger(target));\n    if (typeof onTrigger === \"function\") {\n      onTrigger(target);\n    }\n  };\n  const marker = (ref, label, onClick) => {\n    var _ref$current, _ref$current2;\n    const total = ((_ref$current = ref.current) === null || _ref$current === void 0 ? void 0 : _ref$current.getTotalLength()) || 0;\n    const p = (_ref$current2 = ref.current) === null || _ref$current2 === void 0 ? void 0 : _ref$current2.getPointAtLength(total);\n    return p ? /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"absolute -translate-x-1/2 -translate-y-1/2 text-white bg-black px-2 rounded-full\",\n      style: {\n        left: p.x,\n        top: p.y\n      },\n      onClick: onClick,\n      children: label\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this) : null;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative w-full h-[300px] bg-white\",\n    children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n      className: \"absolute w-full h-full\",\n      viewBox: \"0 0 700 300\",\n      children: [/*#__PURE__*/_jsxDEV(\"path\", {\n        ref: pathA,\n        d: \"M0 89H227.5V4H337\",\n        fill: \"none\",\n        stroke: \"#3B3B3B\",\n        strokeOpacity: \"0.63\",\n        strokeWidth: \"8\",\n        strokeLinejoin: \"round\",\n        strokeDasharray: \"5 5\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n        ref: pathB,\n        d: \"M300 10V209H413V26H491.5\",\n        fill: \"none\",\n        stroke: \"#3B3B3B\",\n        strokeOpacity: \"0.63\",\n        strokeWidth: \"8\",\n        strokeLinejoin: \"round\",\n        strokeDasharray: \"5 5\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), showCar && /*#__PURE__*/_jsxDEV(motion.img, {\n      src: carImg,\n      alt: \"car\",\n      className: \"absolute w-16 h-16\" // 放大車子（原本可能是 w-8 h-8）\n      ,\n      style: {\n        left: carPos.x,\n        top: carPos.y\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }, this), marker(pathA, \"1\", () => handleClick(1)), marker(pathB, \"2\", () => handleClick(2))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n}\n_s(MapScene, \"Aa9t2n6/PpP8s1XEpm2Tpt9GzbY=\");\n_c = MapScene;\nvar _c;\n$RefreshReg$(_c, \"MapScene\");","map":{"version":3,"names":["useRef","useState","useEffect","motion","carImg","jsxDEV","_jsxDEV","MapScene","onTrigger","_s","pathA","pathB","carPos","setCarPos","x","y","showCar","setShowCar","activePath","setActivePath","p","current","getPointAtLength","runPath","pathRef","onComplete","total","getTotalLength","start","duration","animate","timestamp","elapsed","progress","Math","min","point","requestAnimationFrame","setTimeout","handleClick","target","marker","ref","label","onClick","_ref$current","_ref$current2","className","style","left","top","children","fileName","_jsxFileName","lineNumber","columnNumber","viewBox","d","fill","stroke","strokeOpacity","strokeWidth","strokeLinejoin","strokeDasharray","img","src","alt","_c","$RefreshReg$"],"sources":["/Users/fan/Documents/GitHub/nunu/src/component/MapScene.jsx"],"sourcesContent":["import { useRef, useState, useEffect } from \"react\";\nimport { motion } from \"framer-motion\";\nimport carImg from \"../assets/images/van1.webp\";\n\nexport default function MapScene({ onTrigger }) {\n  const pathA = useRef(null);\n  const pathB = useRef(null);\n  const [carPos, setCarPos] = useState({ x: 0, y: 0 });\n  const [showCar, setShowCar] = useState(true);\n  const [activePath, setActivePath] = useState(null);\n\n  // 將車子定位在 pathA 起點，並放大尺寸\n  useEffect(() => {\n    const p = pathA.current.getPointAtLength(0);\n    setCarPos({ x: p.x, y: p.y });\n  }, []);\n\n  // 控制車子行駛動畫\n  const runPath = (pathRef, onComplete) => {\n    const total = pathRef.current.getTotalLength();\n    let start = null;\n    const duration = 1500;\n\n    const animate = (timestamp) => {\n      if (!start) start = timestamp;\n      const elapsed = timestamp - start;\n      const progress = Math.min(elapsed / duration, 1);\n      const point = pathRef.current.getPointAtLength(total * progress);\n      setCarPos({ x: point.x, y: point.y });\n\n      if (progress < 1) {\n        requestAnimationFrame(animate);\n      } else {\n        setTimeout(() => {\n          onComplete();\n        }, 1000);\n      }\n    };\n\n    requestAnimationFrame(animate);\n  };\n\n  // 點擊按鈕時觸發行駛\n  const handleClick = (target) => {\n    setShowCar(true);\n    const pathRef = target === 1 ? pathA : pathB;\n    setActivePath(target);\n    runPath(pathRef, () => onTrigger(target));\n    if (typeof onTrigger === \"function\") {\n      onTrigger(target);\n    }\n  };\n\n  const marker = (ref, label, onClick) => {\n    const total = ref.current?.getTotalLength() || 0;\n    const p = ref.current?.getPointAtLength(total);\n    return p ? (\n      <button\n        className=\"absolute -translate-x-1/2 -translate-y-1/2 text-white bg-black px-2 rounded-full\"\n        style={{ left: p.x, top: p.y }}\n        onClick={onClick}\n      >\n        {label}\n      </button>\n    ) : null;\n  };\n\n  return (\n    <div className=\"relative w-full h-[300px] bg-white\">\n      <svg className=\"absolute w-full h-full\" viewBox=\"0 0 700 300\">\n        {/* pathA: 起點 → 點1（左邊） */}\n        <path\n          ref={pathA}\n          d=\"M0 89H227.5V4H337\"\n          fill=\"none\"\n          stroke=\"#3B3B3B\"\n          strokeOpacity=\"0.63\"\n          strokeWidth=\"8\"\n          strokeLinejoin=\"round\"\n          strokeDasharray=\"5 5\"\n        />\n\n        {/* pathB: 點1 → 點2（右邊，已整體右移） */}\n        <path\n          ref={pathB}\n          d=\"M300 10V209H413V26H491.5\"\n          fill=\"none\"\n          stroke=\"#3B3B3B\"\n          strokeOpacity=\"0.63\"\n          strokeWidth=\"8\"\n          strokeLinejoin=\"round\"\n          strokeDasharray=\"5 5\"\n        />\n      </svg>\n\n      {/* 車子圖片（放大並置中） */}\n      {showCar && (\n        <motion.img\n          src={carImg}\n          alt=\"car\"\n          className=\"absolute w-16 h-16\" // 放大車子（原本可能是 w-8 h-8）\n          style={{ left: carPos.x, top: carPos.y }}\n        />\n      )}\n\n      {/* 點擊點位 */}\n      {marker(pathA, \"1\", () => handleClick(1))}\n      {marker(pathB, \"2\", () => handleClick(2))}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}